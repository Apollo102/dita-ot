# Automatically bump Homebrew formula after each release
# https://github.com/mislav/bump-homebrew-formula-action

# Controls when the action will run. Triggers the workflow when new tags are pushed
on:
  push:
    tags: '*'

# A workflow run is made up of one or more jobs that can run sequentially or in parallel
jobs:

  # This workflow contains a single job called "homebrew"
  homebrew:
    name: Bump Homebrew formula
    # The type of runner that the job will run on
    runs-on: ubuntu-latest

    # Steps represent a sequence of tasks that will be executed as part of the job
    steps:
      - uses: mislav/bump-homebrew-formula-action@v1.6
        if: "!contains(github.ref, '-')" # skip prereleases
        with:
          formula-name: dita-ot
          homebrew-tap: Homebrew/homebrew-core
          base-branch: master
          download-url: https://github.com/dita-ot/dita-ot/releases/download/3.4/dita-ot-3.4.zip
          commit-message: |
            {{formulaName}} {{version}}
            
            Created by https://github.com/mislav/bump-homebrew-formula-action
        env:
          # Access token added as secret to repo settings
          COMMITTER_TOKEN: ${{ secrets.COMMITTER_TOKEN }}
          # GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
